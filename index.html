<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webwing Design Agency UG - Your Brand's Wingman Online</title>
    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="js/nav.js" defer></script>
    <link rel="icon" href="/assets/icons/favicon.svg" type="image/svg+xml">

</head>
<body>

    <header>

        <object data="assets/logo.svg" type="image/svg+xml" width="40" height="40" class="nav-logo"></object>

        <nav class="nav-links">
            <a href="index.html" class="nav-link">Home</a>
            <a href="referenzen.html" class="nav-link">Projekte</a>
            <a href="dienstleistungen.html" class="nav-link">Dienstleistungen</a>
            <a href="kontakt.html" class="nav-link cta-link">Kontakt</a>
        </nav>

        <div class="hamburger-menu">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>

        <div class="popup-menu">
            <div class="popup-menu-link-container">
                <a href="index.html" class="popup-link">Home</a>
                <a href="projekte.html" class="popup-link">Referenzen</a>
                <a href="dienstleistungen.html" class="popup-link">Dienstleistungen</a>
                <a href="kontakt.html" class="popup-link">Kontakt</a>
                <a href="kostenloses-erstgespräch.html" class="popup-link">Erstgespräch buchen</a>
            </div>

            <div class="popup-menu-decorations">
                <span>Webwing Design Agency UG</span><span>+</span>
                <span><a href="mailto:contact@webwing.agency">contact@webwing.agency</a></span><span>+</span>
                <span><a href="tel:01234 123456">01234 123456</a></span><span>+</span>
                <span>Available for Work</span>
            </div>
            
        </div>

    </header>


    <main>



        <section class="hero-section">

            <h1 class="hero-title section-title">
                <span class="hero-line">Engineered to <span class="gradient-text-purple">Convert</span></span><br>
                <span class="hero-line"><span class="gradient-text-pink">Designed</span> to <span class="underline-scribble">Lead <svg xmlns="http://www.w3.org/2000/svg" width="177" height="53" viewBox="0 0 177 53" fill="none" class="scribble-svg"><path d="M2.00004 26.6734C2.27925 26.9093 3.97983 26.3898 8.96364 24.8504C12.3244 23.8124 17.6409 22.816 33.6765 21.5746C49.712 20.3332 76.3739 19.021 99.4541 19.1767C122.534 19.3324 141.225 20.9958 153.139 22.3073C169.668 24.1268 174.771 25.7512 174.97 26.2139C175.082 26.4747 173.806 26.4462 167.673 26.3472C161.539 26.2482 150.226 25.9921 132.91 27.1322C115.595 28.2722 92.6201 30.8161 90.1691 32.5246C87.7181 34.2331 106.487 35.0291 125.941 35.8667" stroke="white" stroke-width="4" stroke-linecap="round"/></svg></span></span>
            </h1>
              

            <p class="hero-subtitle paragraph">   
                    Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor 
                    invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et 
                    accusam et justo duo dolores et ea rebum. 
            </p>

            <a href="kostenloses-erstgespräch.html" class="cta">kostenloses Erstgespräch</a>

            <img src="assets/hero-bg.png" alt="Hero Section Hintergrund" class="hero-bg">

        </section>
    
    
    
        <section class="expertise-section">

            <div class="section-title-container flex">

                <h2 class="expertise-title section-title">Unsere Expertise</h2>

                <a href="dienstleistungen.html" class="reference-link">Mehr erfahren →</a>

            </div>





            <div class="grid expertise-grid">


                <div class="grid-card" id="expertiseCard1">

                    <div class="design-icon-container icon-container">
                        <object data="/assets/icons/design.svg" type="image/svg+xml" width="40" height="40" class="icon"></object>
                    </div>

                    <h3 class="card-title">Design</h3>

                    <p class="card-text">
                        Mit unserer Expertise im Bereich UI/UX schaffen wir Designs, 
                        die nicht nur ästhetisch überzeugen, sondern auch funktional begeistern.</p>
                
                </div>


                <div class="grid-card" id="expertiseCard2">

                    <div class="conversion-icon-container icon-container">
                        <object data="/assets/icons/shopping.svg" type="image/svg+xml" width="40" height="40" class="icon"></object>
                    </div>

                    <h3 class="card-title">Conversion</h3>

                    <p class="card-text">
                        Wir optimieren Ihre Website gezielt, um Besucher in Kunden zu verwandeln 
                        und Ihre Conversion-Rate zu steigern.</p>
                
                </div>

                
                <div class="grid-card" id="expertiseCard3">

                    <div class="seo-icon-container icon-container">
                        <object data="/assets/icons/search.svg" type="image/svg+xml" width="40" height="40" class="icon"></object>
                    </div>

                    <h3 class="card-title">SEO</h3>

                    <p class="card-text">
                        Mit effektiven SEO-Strategien sorgen wir dafür, dass Ihre Website 
                        in den Suchmaschinen besser gefunden wird.</p>
                
                </div>


                <div class="grid-card" id="expertiseCard4">

                    <div class="code-icon-container icon-container">
                        <object data="/assets/icons/code.svg" type="image/svg+xml" width="40" height="40" class="icon"></object>
                    </div>

                    <h3 class="card-title">Entwicklung</h3>

                    <p class="card-text">
                        Wir entwickeln maßgeschneiderte Websites, die sowohl technisch 
                        als auch visuell überzeugen.</p>
                
                </div>


                <div class="grid-card" id="expertiseCard5">

                    <div class="performance-icon-container icon-container">
                        <object data="/assets/icons/speedometer.svg" type="image/svg+xml" width="40" height="40" class="icon"></object>
                    </div>

                    <h3 class="card-title">Performance</h3>

                    <p class="card-text">
                        Durch Optimierung der Ladezeiten sorgen wir für eine schnelle und 
                        reibungslose Nutzererfahrung.</p>
                
                </div>


                <div class="grid-card" id="expertiseCard6">

                    <div class="ai-icon-container icon-container">
                        <object data="/assets/icons/robot.svg" type="image/svg+xml" width="40" height="40" class="icon"></object>
                    </div>

                    <h3 class="card-title">AI Integration</h3>

                    <p class="card-text">
                        Wir integrieren KI-Lösungen, um Ihre Website intelligenter und 
                        benutzerfreundlicher zu gestalten.</p>
                
                </div>

            </div>
    
        </section>
    
    
    
        <section class="projects-section">
    
            <div class="section-title-container flex">

                <h2 class="projects-title section-title ">Zurückliegende Projekte</h2>
                <a href="dienstleistungen.html" class="reference-link">Alle Projekte →</a>


            </div>

            <div class="grid">

                <div class="grid-card" id="projectCard1">

                    <img class="card-img project-img" src="/assets/images/projects/project-1.png" alt="Projekt 1">

                    <h3 class="card-title">Ofenkäse-Versandhandel Rainer Winkler GmbH</h3>

                    <p class="card-text">
                        Ein erfolgreiches E-Commerce-Projekt, bei dem wir eine benutzerfreundliche Plattform 
                        entwickelt haben, die sowohl Design als auch Funktionalität vereint.</p>

                    <div class="tag-container">
                        <span class="tag">React</span>
                        <span class="tag">E-Commerce</span>
                    </div>
                </div>

                <div class="grid-card" id="projectCard2">

                    <img class="card-img project-img" src="/assets/images/projects/project-2.png" alt="Projekt 2">

                    <h3 class="card-title">GreenTech Solutions AG</h3>

                    <p class="card-text">
                        Entwicklung einer nachhaltigen Unternehmenswebsite mit Fokus auf SEO und 
                        Performance, um die Sichtbarkeit in Suchmaschinen zu maximieren.</p>

                    <div class="tag-container">
                        <span class="tag">WordPress</span>
                        <span class="tag">SEO</span>
                        <span class="tag">Performance</span>
                    </div>
                </div>

                <div class="grid-card" id="projectCard3">

                    <img class="card-img project-img" src="/assets/images/projects/project-3.png" alt="Projekt 3">

                    <h3 class="card-title">UrbanFit App</h3>

                    <p class="card-text">
                        Eine mobile Fitness-App, die wir mit einem modernen Design und einer 
                        intuitiven Benutzeroberfläche ausgestattet haben, um die Nutzerbindung zu fördern.</p>

                    <div class="tag-container">
                        <span class="tag">Flutter</span>
                        <span class="tag">Mobile App</span>
                        <span class="tag">UI/UX</span>
                    </div>
                </div>


            </div>

        </section>
    
    
    
    
        <section class="reviews-section">

            <h2 class="reviews-title section-title">Das sagen unsere Kunden</h2>
    
            <div class="grid">



                <div class="grid-card" id="reviewCard1">

                    <img class="client-img" src="assets/images/clients/client-1.png" alt="Kundenbild 1">

                    <h3 class="card-title client-name">Rainer Winkler</h3>
                    <span class="corporation-name">Ofenkäse-Versandhandel Winkler GmbH</span>

                    <p class="card-text testimonial-text">
                        "Webwing hat unsere Erwartungen übertroffen! Die neue Website ist nicht nur optisch ansprechend, 
                        sondern auch extrem benutzerfreundlich. Unsere Kunden lieben das Design, und wir sehen bereits 
                        eine deutliche Steigerung der Conversion-Rate."
                    </p>

                    <div class="star-container"> <object data="assets/icons/5-stars.svg" type="image/svg+xml" width="40" height="40" class="star-review"></object></div>
                </div>



                <div class="grid-card" id="reviewCard2">

                    <img class="client-img" src="assets/images/clients/client-2.png" alt="Kundenbild 2">

                    <h3 class="card-title client-name">Joseph Stalin<h3
                    <span class="corporation-name">Communist Innovations GmbH</span>

                    <p class="card-text testimonial-text">
                        "Dank Webwing haben wir eine Website, die perfekt zu unserer Marke passt. Die Zusammenarbeit war 
                        professionell und effizient. Wir sind begeistert von den Ergebnissen!"
                    </p>

                    <div class="star-container"> <object data="assets/icons/5-stars.svg" type="image/svg+xml" width="40" height="40" class="star-review"></object></div>
                </div>




                <div class="grid-card" id="reviewCard3">

                    <img class="client-img" src="assets/images/clients/client-3.png" alt="Kundenbild 3">

                    <h3 class="card-title client-name">Arnold Schwarzenegger</h3>
                    <span class="corporation-name">Onion Ring Digital Solutions LLC</span>
                    
                    <p class="card-text testimonial-text">
                        "Die neue Benutzeroberfläche unserer App ist ein echter Gamechanger. Webwing hat großartige Arbeit 
                        geleistet und unsere Vision perfekt umgesetzt."
                    </p>

                    <div class="star-container"> <object data="assets/icons/5-stars.svg" type="image/svg+xml" width="40" height="40" class="star-review"></object></div>
                </div>



            </div>
        </section>
    
    
    
    
        <section class="book-call-section">

            <div class="book-call-card">
    
                <div class="left-side">
                    <h2 class="book-call-title section-title">Bereit, Ihr Projekt zu kickstarten?</h2>

                    <p class="book-call-paragraph paragraph">
                        Vereinbaren sie jetzt ein <b>unverbindliches und kostenloses 20-minütiges Erstgespräch</b>, 
                        in welchem wir ihre Bedürfnisse und Wünsche erörtern und jede ihrer Fragen 
                        bezüglich ... , ... sowie ... beantworten werden.</p>

                    <div class="contact-details-container container">

                        <div class="contact-container">
                            <div class="contact-icon-container icon-container ">
                                <object data="/assets/icons/mail.svg" type="image/svg+xml" width="40" height="40" class="icon"></object>
                            </div>
                            <a href="mailto:contact@webwing.agency" class="contact-link">contact@webwing.agency</a>
                        </div>
                        <div class="contact-container">
                            <div class="contact-icon-container icon-container">
                                <object data="/assets/icons/phone.svg" type="image/svg+xml" width="40" height="40" class="icon"></object>
                            </div>
                            <a href="tel:06221 123456" class="contact-link">06221 123456</a>
                        </div>

                    </div>
                
                    </div>


                <div class="right-side">

                    <form class="booking-form">

                        <div class="form-group">
                            <label class="form-label" for="bookingName">Name</label>
                            <input type="text" id="bookingName" class="form-input" placeholder="Ihr Name">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="bookingEmail">E-Mail</label>
                            <input type="email" id="bookingEmail" class="form-input" placeholder="Ihre E-Mail-Adresse">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="bookingPhone">Telefonnummer</label>
                            <input type="tel" id="bookingPhone" class="form-input" placeholder="Ihre Telefonnummer">
                        </div>

                        <div class="datetime-container">

                            <div class="date-container">
                                <h3 class="form-label">Tag</h3>
                                <div class="calendar">
                                    <div class="calendar-header">
                                        <span>Mo</span><span>Di</span><span>Mi</span><span>Do</span><span>Fr</span><span>Sa</span><span>So</span>
                                    </div>
                                    <div class="calendar-grid">
                                        <button class="calendar-day">1</button><button class="calendar-day">2</button><button class="calendar-day">3</button><button class="calendar-day">4</button><button class="calendar-day">5</button><button class="calendar-day">6</button><button class="calendar-day">7</button>
                                        <button class="calendar-day">8</button><button class="calendar-day">9</button><button class="calendar-day">10</button><button class="calendar-day">11</button><button class="calendar-day">12</button><button class="calendar-day">13</button><button class="calendar-day">14</button>
                                        <button class="calendar-day">15</button><button class="calendar-day">16</button><button class="calendar-day">17</button><button class="calendar-day">18</button><button class="calendar-day">19</button><button class="calendar-day">20</button><button class="calendar-day">21</button>
                                        <button class="calendar-day">22</button><button class="calendar-day">23</button><button class="calendar-day">24</button><button class="calendar-day">25</button><button class="calendar-day">26</button><button class="calendar-day">27</button><button class="calendar-day">28</button>
                                        <button class="calendar-day">29</button><button class="calendar-day">30</button><button class="calendar-day">31</button>
                                    </div>
                                </div>
                            </div>

                            <div class="time-container">
                                <h3 class="form-label">Uhrzeit</h3>
                                <div class="timeslots">
                                    <button class="timeslot">14:00</button><button class="timeslot">15:00</button><button class="timeslot">16:00</button><button class="timeslot">17:00</button><button class="timeslot">18:00</button>
                                </div>
                            </div>

                        </div>

                        <div class="submit-container">
                            <button type="submit" class="submit-button">jetzt kostenloses Erstgespräch buchen</button>
                        </div>

                    </form>
                </div>
            </div>

        </section>



    </main>

    <footer>
        <div class="footer-content">
            
            <div class="logo-container">

                <object data="assets/logo.svg" type="image/svg+xml" width="40" height="40" class="logo"></object>

                <span class="slogan">Your Brand’s Wingman Online.</span>

            </div>

            <nav class="footer-nav">
                <a href="index.html">Home</a>
                <a href="referenzen.html">Projekte</a>
                <a href="dienstleistungen.html">Dienstleistungen</a>
                <a href="kontakt.html">Kontakt</a>
            </nav>
            <div class="legal-links">
                <a href="impressum.html">Impressum</a>
                <a href="datenschutzerklärung.html">Datenschutzerklärung</a>
            </div>
        </div>
    </footer>    

    <script>

        document.addEventListener('DOMContentLoaded', () => {
          const API_BASE = 'http://localhost:3000'; // change if needed
        
          // DOM nodes (your markup)
          const calendarRootOrig = document.querySelector('.calendar');
          const calendarRoot = calendarRootOrig || (function(){ const el = document.createElement('div'); el.className='calendar'; document.body.insertBefore(el, document.body.firstChild); return el; })();
        
          if (!calendarRoot.querySelector('.calendar-header')) {
            const header = document.createElement('div'); header.className='calendar-header';
            ['Mo','Di','Mi','Do','Fr','Sa','So'].forEach(w => { const s = document.createElement('span'); s.textContent = w; header.appendChild(s); });
            calendarRoot.appendChild(header);
          }
        
          let gridEl = calendarRoot.querySelector('.calendar-grid');
          if (!gridEl) { gridEl = document.createElement('div'); gridEl.className = 'calendar-grid'; calendarRoot.appendChild(gridEl); }
        
          if (!calendarRoot.querySelector('.calendar-month-header')) {
            const headerRow = document.createElement('div'); headerRow.className='calendar-month-header';
            headerRow.style.display='flex'; headerRow.style.justifyContent='space-between'; headerRow.style.alignItems='center'; headerRow.style.marginBottom='8px';
            const prevBtn = document.createElement('button'); prevBtn.className='calendar-prev'; prevBtn.type='button'; prevBtn.textContent='‹';
            const monthLabel = document.createElement('div'); monthLabel.className='calendar-month-label'; monthLabel.style.fontWeight='600';
            const nextBtn = document.createElement('button'); nextBtn.className='calendar-next'; nextBtn.type='button'; nextBtn.textContent='›';
            headerRow.appendChild(prevBtn); headerRow.appendChild(monthLabel); headerRow.appendChild(nextBtn);
            calendarRoot.insertBefore(headerRow, calendarRoot.firstChild);
          }
        
          let timeslotsContainer = document.querySelector('.timeslots');
          if (!timeslotsContainer) { timeslotsContainer = document.createElement('div'); timeslotsContainer.className = 'timeslots'; calendarRoot.insertAdjacentElement('afterend', timeslotsContainer); }
        
          const bookingForm = document.querySelector('.booking-form');
          if (!bookingForm) {
            console.error('[booking] booking form not found in DOM; aborting script.');
            return;
          }
        
          // ensure hidden startLocal input exists
          let startLocalInput = bookingForm.querySelector('input[name="startLocal"]');
          if (!startLocalInput) {
            startLocalInput = document.createElement('input');
            startLocalInput.type = 'hidden';
            startLocalInput.name = 'startLocal';
            bookingForm.appendChild(startLocalInput);
          }
        
          const prevBtn = calendarRoot.querySelector('.calendar-prev');
          const nextBtn = calendarRoot.querySelector('.calendar-next');
          const monthLabel = calendarRoot.querySelector('.calendar-month-label');
        
          // state
          let viewDate = new Date(); viewDate.setDate(1);
          let selectedDate = null;   // 'YYYY-MM-DD'
          let selectedSlot = null;   // 'HH:mm'
        
          // helpers
          const pad = n => String(n).padStart(2,'0');
          const isoFromYMD = (y,m,d) => `${y}-${pad(m)}-${pad(d)}`;
          const toIsoDateString = date => (date instanceof Date) ? isoFromYMD(date.getFullYear(), date.getMonth()+1, date.getDate()) : (typeof date==='string' ? date.slice(0,10) : null);
          const monthLabelText = date => date.toLocaleDateString('de-DE', { month:'long', year:'numeric' });
        
          // fetch availability - returns { disabled: bool, slots: [ {time, isDisabled}, ... ] }
          async function fetchAvailabilityRaw(isoDate) {
            try {
              const url = `${API_BASE}/api/availability?date=${encodeURIComponent(isoDate)}`;
              console.log('[booking] GET', url);
              const res = await fetch(url);
              if (!res.ok) {
                console.error('[booking] availability fetch failed', res.status);
                return { disabled: true, slots: [] };
              }
              return await res.json();
            } catch (e) {
              console.error('[booking] fetchAvailability error', e);
              return { disabled: true, slots: [] };
            }
          }
        
          async function isDateDisabled(dateObj) {
            const iso = toIsoDateString(dateObj);
            if (!iso) return true;
            const data = await fetchAvailabilityRaw(iso);
            return !!data.disabled;
          }
        
          // render the month calendar asynchronously (we await per-day disabled check)
          async function renderCalendar() {
            gridEl.innerHTML = '';
            monthLabel.textContent = monthLabelText(viewDate);
        
            const year = viewDate.getFullYear();
            const month = viewDate.getMonth(); // 0..11
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const lastDate = lastDay.getDate();
            const jsFirstWeekday = firstDay.getDay();
            const blanksBefore = (jsFirstWeekday + 6) % 7; // monday-first
            const totalCells = blanksBefore + lastDate;
            const rows = Math.ceil(totalCells / 7);
            const today = new Date(); today.setHours(0,0,0,0);
        
            let dayCounter = 1;
            for (let r = 0; r < rows; r++) {
              const row = document.createElement('div'); row.className='calendar-row'; row.style.display='flex';
              for (let c = 0; c < 7; c++) {
                const cellIndex = r*7 + c;
                const cell = document.createElement('div'); cell.className='calendar-cell'; cell.style.flex='1'; cell.style.padding='4px';
                if (cellIndex < blanksBefore || dayCounter > lastDate) {
                  const emptyBtn = document.createElement('button'); emptyBtn.type='button'; emptyBtn.className='calendar-day empty'; emptyBtn.disabled=true; emptyBtn.style.visibility='hidden';
                  cell.appendChild(emptyBtn);
                } else {
                  const iso = isoFromYMD(year, month+1, dayCounter);
                  const btn = document.createElement('button'); btn.type='button'; btn.className='calendar-day'; btn.textContent = String(dayCounter); btn.dataset.date = iso;
                  const cellDate = new Date(year, month, dayCounter); cellDate.setHours(0,0,0,0);
                  // check disabled (server may return disabled boolean)
                  let disabled = false;
                  try { disabled = await isDateDisabled(cellDate); } catch (e) { console.warn('[booking] isDateDisabled error', e); disabled = true; }
                  if (cellDate < today || disabled) { btn.classList.add('is-disabled'); btn.disabled = true; }
                  cell.appendChild(btn);
                  dayCounter++;
                }
                row.appendChild(cell);
              }
              gridEl.appendChild(row);
            }
        
            bindCalendarDays();
          }
        
          // fetch available times (public function used on click)
          async function fetchAvailableTimes(isoDate) {
            const data = await fetchAvailabilityRaw(isoDate);
            // data.slots is array of {time, isDisabled}
            if (!Array.isArray(data.slots)) return [];
            return data.slots.filter(s => !s.isDisabled).map(s => s.time);
          }
        
          // render time slots UI
          function renderTimeSlots(slots) {
            timeslotsContainer.innerHTML = '';
            if (!Array.isArray(slots) || slots.length === 0) {
              timeslotsContainer.textContent = 'Keine verfügbaren Zeiten';
              return;
            }
            slots.forEach(slot => {
              const b = document.createElement('button'); b.type='button'; b.className='timeslot'; b.textContent=slot;
              b.addEventListener('click', () => {
                timeslotsContainer.querySelectorAll('.timeslot').forEach(x => x.classList.remove('is-active'));
                b.classList.add('is-active');
                selectedSlot = slot;
                if (selectedDate) startLocalInput.value = `${selectedDate}T${selectedSlot}:00`;
              });
              timeslotsContainer.appendChild(b);
            });
          }
        
          // bind clicks for calendar days
          function bindCalendarDays() {
            // remove previous handlers safely by cloning
            document.querySelectorAll('.calendar-day').forEach(btn => {
              const clone = btn.cloneNode(true);
              btn.replaceWith(clone);
            });
        
            document.querySelectorAll('.calendar-day').forEach(btn => {
              if (btn.classList.contains('empty') || btn.classList.contains('is-disabled')) return;
              btn.addEventListener('click', async (e) => {
                e.preventDefault();
                selectedDate = btn.dataset.date;
                document.querySelectorAll('.calendar-day').forEach(x => x.classList.remove('is-active'));
                btn.classList.add('is-active');
                // fetch available times for this date
                const slots = await fetchAvailableTimes(selectedDate);
                renderTimeSlots(slots);
              });
            });
          }
        
          // prev / next handlers
          prevBtn.addEventListener('click', () => { viewDate = new Date(viewDate.getFullYear(), viewDate.getMonth()-1, 1); renderCalendar(); });
          nextBtn.addEventListener('click', () => { viewDate = new Date(viewDate.getFullYear(), viewDate.getMonth()+1, 1); renderCalendar(); });
        
          // ---------- FORM SUBMISSION HANDLER (NEW) ----------
          bookingForm.addEventListener('submit', async (e) => {
            e.preventDefault();
        
            // simple form values
            const name = document.getElementById('bookingName')?.value?.trim() || '';
            const email = document.getElementById('bookingEmail')?.value?.trim() || '';
            const phone = document.getElementById('bookingPhone')?.value?.trim() || '';
            const timezone = 'Europe/Berlin';
        
            // basic validation
            if (!name) { alert('Bitte geben Sie Ihren Namen ein.'); return; }
            if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { alert('Bitte geben Sie eine gültige E-Mail-Adresse ein.'); return; }
            if (!selectedDate || !selectedSlot) { alert('Bitte wählen Sie ein Datum und eine Uhrzeit aus.'); return; }
        
            // idempotency key
            const idempotencyKey = (typeof crypto?.randomUUID === 'function') ? crypto.randomUUID() : `${Date.now()}-${Math.random().toString(36).slice(2,9)}`;
        
            const payload = { name, email, phone, startLocal: startLocalInput.value, timezone, idempotencyKey, source: 'website' };
            console.log('[booking] sending payload', payload);
        
            // disable submit button while processing
            const submitBtn = bookingForm.querySelector('button[type="submit"]');
            if (submitBtn) { submitBtn.disabled = true; submitBtn.dataset.origText = submitBtn.textContent; submitBtn.textContent = 'Wird gebucht…'; }
        
            try {
              const res = await fetch(`${API_BASE}/api/book`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              });
        
              const text = await res.text();
              console.log('[booking] booking raw response:', text);
              let data;
              try { data = JSON.parse(text); } catch (err) { data = { message: text }; }
        
              if (res.ok) {
                alert('Termin gebucht! Eine Bestätigung wird an Ihre E-Mail gesendet.');
                // reset UI
                bookingForm.reset();
                timeslotsContainer.innerHTML = '';
                document.querySelectorAll('.calendar-day').forEach(x => x.classList.remove('is-active'));
                selectedDate = null; selectedSlot = null;
              } else {
                console.error('[booking] booking failed', data);
                alert('Fehler beim Buchen: ' + (data?.message || 'Serverantwort unklar'));
              }
            } catch (err) {
              console.error('[booking] network error', err);
              alert('Netzwerkfehler. Bitte versuchen Sie es später erneut.');
            } finally {
              if (submitBtn) { submitBtn.disabled = false; submitBtn.textContent = submitBtn.dataset.origText || 'jetzt kostenloses Erstgespräch buchen'; }
            }
          });
        
          // initial render
          (async ()=>{ await renderCalendar(); console.log('[booking] calendar ready - API_BASE=', API_BASE); })();
        });
        </script>
        
<script>

  // headline: small rise (feels 'built'), tighter stagger for sleekness
  
/* Full hero timeline with 3 timing strategies: 'label', 'relative', 'absolute'
   - mode: 'label' uses timeline labels (recommended)
   - mode: 'relative' uses '<' based relative positioning
   - mode: 'absolute' computes exact times (useful when you want pixel-precise timing)
   Tweak the config block below to taste.
*/

(function () {
  // ---------- CONFIG ----------
  const config = {
    mode: 'label', // 'label' | 'relative' | 'absolute'
    // core timings (feel free to tweak)
    headline: { startAt: 0.12, duration: 0.8, stagger: 0.12 }, // startAt is used as absolute start for label/absolute; for relative we use it as timeline offset
    subtitle: { duration: 0.7, // used differently per mode below
                // label mode: starts at headlineStart + subtitle.startAfter (seconds)
                // relative mode: starts at same time as title start with offset '<+=subtitle.startAfter'
                // absolute mode: starts at computed time = headlineEnd - subtitleOverlap
                startAfter: 0.45, // seconds after headlineStart (label) / relative uses '<+=startAfter'
                overlapFromEnd: 0.5 // used by absolute mode: subtitleStart = headlineEnd - overlapFromEnd
              },
    cta: { duration: 0.55, startAfter: 0.6 }, // same semantics as subtitle.startAfter
    bg: { duration: 2.4 }, // background slow depth
    scribble: { duration: 0.66, strokeWidthPolish: 0.14, finalStrokeWidth: 4.2 }
  };
  // ---------- END CONFIG ----------

  const hero = document.querySelector('.hero-section');
  if (!hero) return;

  const titleLines = gsap.utils.toArray('.hero-line');
  const subtitle = hero.querySelector('.hero-subtitle');
  const cta = hero.querySelector('.cta');
  const bg = hero.querySelector('.hero-bg');
  const scribblePath = document.querySelector('.scribble-svg path');

  // reduced motion
  const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (reduceMotion) {
    // instant final state
    if (titleLines.length) gsap.set(titleLines, { y: 0, autoAlpha: 1, clearProps: 'all' });
    if (subtitle) gsap.set(subtitle, { y: 0, autoAlpha: 1, clearProps: 'all' });
    if (cta) gsap.set(cta, { y: 0, autoAlpha: 1, clearProps: 'all' });
    if (bg) gsap.set(bg, { scale: 1, y: 0, autoAlpha: 1, clearProps: 'all' });
    if (scribblePath) {
      const L = scribblePath.getTotalLength?.() || 0;
      gsap.set(scribblePath, { strokeDasharray: L, strokeDashoffset: 0, clearProps: 'all' });
    }
    return;
  }

  // initial states
  gsap.set(titleLines, { y: 20, autoAlpha: 0, willChange: 'transform,opacity' });
  if (subtitle) gsap.set(subtitle, { y: 12, autoAlpha: 0, willChange: 'transform,opacity' });
  if (cta) gsap.set(cta, { y: 10, autoAlpha: 0, willChange: 'transform,opacity' });
  if (bg) gsap.set(bg, { scale: 1.04, y: 8, autoAlpha: 0, willChange: 'transform,opacity' });

  let pathLength = 0;
  if (scribblePath) {
    pathLength = scribblePath.getTotalLength();
    gsap.set(scribblePath, {
      strokeDasharray: pathLength,
      strokeDashoffset: pathLength,
      opacity: 0,
      willChange: 'stroke-dashoffset'
    });
  }

  const tl = gsap.timeline({ defaults: { ease: 'power2.out' } });

  // background: always start at 0 (slow subtle depth)
  if (bg) {
    tl.to(bg, { scale: 1, y: 0, autoAlpha: 1, duration: config.bg.duration, ease: 'power2.out' }, 0);
  }

  // Helper that adds headline tween and returns the "startTime" used
  function addHeadline() {
    // Use fromTo for deterministic behavior
    const startAt = config.headline.startAt;
    tl.fromTo(
      titleLines,
      { y: 20, autoAlpha: 0 },
      {
        y: 0,
        autoAlpha: 1,
        duration: config.headline.duration,
        stagger: config.headline.stagger,
        ease: 'power3.out'
      },
      startAt
    );
    return startAt;
  }

  // Add headline
  const headlineStart = addHeadline();

  // Add subtitle & CTA depending on mode
  if (config.mode === 'label') {
    // label mode: explicit label + offsets relative to that label (recommended)
    tl.addLabel('headlineStart', headlineStart);

    // subtitle at headlineStart + startAfter
    if (subtitle) {
      tl.to(subtitle, {
        y: 0,
        autoAlpha: 1,
        duration: config.subtitle.duration,
        ease: 'power2.out'
      }, `headlineStart+=${config.subtitle.startAfter}`);
    }

    if (cta) {
      tl.to(cta, {
        y: 0,
        autoAlpha: 1,
        duration: config.cta.duration,
        ease: 'power2.out'
      }, `headlineStart+=${config.cta.startAfter}`);
    }

    // scribble if present: start slightly before headline end (we can compute headline end)
    if (scribblePath) {
      // compute headline end time:
      const n = Math.max(1, titleLines.length);
      const headlineEnd = headlineStart + config.headline.duration + config.headline.stagger * (n - 1);
      // start scribble a bit before headlineEnd
      const scribbleStart = Math.max(headlineStart, headlineEnd - 0.32);
      tl.to(scribblePath, { strokeDashoffset: 0, duration: config.scribble.duration, ease: 'sine.out' }, scribbleStart);
      tl.to(scribblePath, { opacity: 1, duration: 0.08 }, '<');
      tl.to(scribblePath, { strokeWidth: config.scribble.finalStrokeWidth, duration: config.scribble.strokeWidthPolish, ease: 'power1.out' }, '<');
    }

  } else if (config.mode === 'relative') {
    // relative mode uses '<' positioning relative to the previous tween start
    // We placed headline at headlineStart. Now sequence relative to its START.
    // Start subtitle at headlineStart + startAfter using '<+=startAfter' relative to the title tween's start.
    if (subtitle) {
      tl.to(subtitle, { y: 0, autoAlpha: 1, duration: config.subtitle.duration, ease: 'power2.out' }, `<+=${config.subtitle.startAfter}`);
    }
    if (cta) {
      tl.to(cta, { y: 0, autoAlpha: 1, duration: config.cta.duration, ease: 'power2.out' }, `<+=${config.cta.startAfter}`);
    }
    if (scribblePath) {
      tl.to(scribblePath, { strokeDashoffset: 0, duration: config.scribble.duration, ease: 'sine.out' }, `<+=${Math.max(0, config.headline.duration - 0.32)}`);
      tl.to(scribblePath, { opacity: 1, duration: 0.08 }, '<');
      tl.to(scribblePath, { strokeWidth: config.scribble.finalStrokeWidth, duration: config.scribble.strokeWidthPolish, ease: 'power1.out' }, '<');
    }

  } else if (config.mode === 'absolute') {
    // absolute mode: compute headlineEnd exactly and place subtitle relative to that end (or overlap)
    const n = Math.max(1, titleLines.length);
    const headlineEnd = headlineStart + config.headline.duration + config.headline.stagger * (n - 1);
    // subtitle start is headlineEnd - overlapFromEnd (so it overlaps by that amount)
    const subtitleStart = Math.max(0, headlineEnd - config.subtitle.overlapFromEnd);
    if (subtitle) {
      tl.to(subtitle, { y: 0, autoAlpha: 1, duration: config.subtitle.duration, ease: 'power2.out' }, subtitleStart);
    }
    if (cta) {
      // place CTA a bit after subtitleStart (or after headlineStart + startAfter if you prefer)
      const ctaStart = subtitleStart + 0.12;
      tl.to(cta, { y: 0, autoAlpha: 1, duration: config.cta.duration, ease: 'power2.out' }, ctaStart);
    }
    if (scribblePath) {
      // start scribble just before headlineEnd
      const scribbleStart = Math.max(0, headlineEnd - 0.32);
      tl.to(scribblePath, { strokeDashoffset: 0, duration: config.scribble.duration, ease: 'sine.out' }, scribbleStart);
      tl.to(scribblePath, { opacity: 1, duration: 0.08 }, '<');
      tl.to(scribblePath, { strokeWidth: config.scribble.finalStrokeWidth, duration: config.scribble.strokeWidthPolish, ease: 'power1.out' }, '<');
    }
  }

  // tiny final spacer
  tl.to({}, { duration: 0.08 });

  // cleanup will-change after complete
  tl.eventCallback('onComplete', () => {
    titleLines.forEach(el => el.style.willChange = 'auto');
    if (subtitle) subtitle.style.willChange = 'auto';
    if (cta) cta.style.willChange = 'auto';
    if (bg) bg.style.willChange = 'auto';
    if (scribblePath) scribblePath.style.willChange = 'auto';
  });

  // expose timeline for debugging if you want
  hero._heroTimeline = tl;

})();



</script>

</body>
</html>



        
        