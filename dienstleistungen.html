<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unser Angebot an Dienstleistungnen - Webwing Design Agency</title>
    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/responsive/desktop.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="js/nav.js" defer></script>
    <link rel="icon" href="/assets/icons/favicon.svg" type="image/svg+xml">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="js/gsap/gsap-global.js"></script>
</head>
<body>

    <header>

        <object data="assets/logo.svg" type="image/svg+xml" width="40" height="40" class="nav-logo"></object>

        <nav class="nav-links">
            <a href="index.html" class="nav-link">Home</a>
            <a href="referenzen.html" class="nav-link">Referenzen</a>
            <a href="dienstleistungen.html" class="nav-link">Dienstleistungen</a>
            <a href="kontakt.html" class="nav-link cta-link">Kontakt</a>
        </nav>

        <div class="hamburger-menu">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>

        <div class="popup-menu">
            <div class="popup-menu-link-container">
                <a href="index.html" class="popup-link">Home</a>
                <a href="referenzen.html" class="popup-link">Referenzen</a>
                <a href="dienstleistungen.html" class="popup-link">Dienstleistungen</a>
                <a href="kontakt.html" class="popup-link">Kontakt</a>
                <a href="kostenloses-erstgespräch.html" class="popup-link">Erstgespräch buchen</a>
            </div>

            <div class="popup-menu-decorations">
                <span>Webwing Design Agency UG</span><span>+</span>
                <span><a href="mailto:contact@webwing.agency">contact@webwing.agency</a></span><span>+</span>
                <span><a href="tel:01234 123456">01234 123456</a></span><span>+</span>
                <span>Available for Work</span>
            </div>
            
        </div>

    </header>

    <main>

        <section class="services-page-fold">
      
          <h1 class="page-title-large services-page-title page-title">
            <!-- CMS: page title -->
          </h1>
      
          <div class="selection-flex">
            <!-- CMS: filter tags (optional) -->
      
            <div class="search-wrapper">
              <svg class="search-icon" viewBox="0 0 24 24" aria-hidden="true">
                <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" fill="none"></circle>
                <line x1="16.65" y1="16.65" x2="21" y2="21" stroke="currentColor" stroke-width="2"></line>
              </svg>
              <input type="text" class="search-bar" placeholder="">
            </div>
          </div>
      
          <div class="services-grid">
      
            <!-- CMS: services collection -->
            <div class="service-card grid-card">
      
              <div class="service-images-grid">
                <!-- CMS: repeatable images -->
                <img src="" alt="" class="service-image">
              </div>
      
              <h3 class="service-title">
                <!-- CMS: service title -->
              </h3>
      
              <div class="service-card-text-container flex">
      
                <p class="service-description">
                  <!-- CMS: service description -->
                </p>
      
                <ul class="service-specs">
                  <!-- CMS: repeatable bullet list -->
                  <li></li>
                </ul>
      
              </div>
      
              <div class="card-cta-container flex">
                <!-- CMS: CTAs -->
                <a href="" class="card-cta"></a>
                <a href="" class="card-cta"></a>
              </div>
      
            </div>
            <!-- /CMS service -->
      
          </div>
      
        </section>
      
        <div class="sticky-cta-container">
          <span class="cta-label"><!-- CMS --></span>
          <a href="" class="cta"><!-- CMS --></a>
        </div>
      
      </main>
      


    <footer>
        <div class="footer-content">
            
            <div class="logo-container">

                <object data="assets/logo.svg" type="image/svg+xml" width="40" height="40" class="logo"></object>

                <span class="slogan">Your Brand’s Wingman Online.</span>

            </div>

            <nav class="footer-nav">
                <a href="index.html">Home</a>
                <a href="referenzen.html">Projekte</a>
                <a href="dienstleistungen.html">Dienstleistungen</a>
                <a href="kontakt.html">Kontakt</a>
            </nav>
            <div class="legal-links">
                <a href="impressum.html">Impressum</a>
                <a href="datenschutzerklärung.html">Datenschutzerklärung</a>
            </div>
        </div>
    </footer>    

    <style>
        .services-page-fold {
            padding-bottom: 10rem;
        }

        .selection-flex {
            width: 100%;
            display: flex;
            gap: 1rem;
            margin-bottom: 5rem;
            flex-wrap: wrap-reverse;
        }

        .filter-select, .search-bar {
            background-color: var(--card-bg);
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
        }

        .filter-select, .search-bar::placeholder {
            font-weight: 500;
            font-size: var(--text-font-size);
        }

        .filter-select {
            flex: 1;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .search-wrapper {
            position: relative;
            min-width: 20rem;
            flex: 2;
        }

            .search-icon {
                position: absolute;
                left: 12px;
                top: 50%;
                transform: translateY(-50%);
                width: 18px;
                height: 18px;
                color: #fff;
                pointer-events: none;
            }

            .search-bar {
                width: 100%;
                padding: 10px 12px 10px 40px; 
                font-size: 16px;
                box-sizing: border-box;
                color: #fff;
            }

        .services-grid {
            display: flex;
            flex-direction: column;
            gap: 3rem;
            width: 100%;
        }

        .service-images-grid {
            width: calc(90vw - 4rem);
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            height: 20rem;
            width: 100%;
            overflow-x: scroll;
        }

                .service-image {
                    flex: 1;
                    object-fit: cover;
                }


        .service-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }

        .service-specs {
            list-style: none;
            padding: 0;
            margin: 0;
            margin-bottom: 1rem;
            font-size: var(--text-font-size);
            color: var(--text-color);
            line-height: 1.8;
        }

        .service-card-text-container {
            justify-content: space-between;
            gap: 2rem;
            flex-direction: column;
        }   

            .service-specs {
                flex: 1;
            }

            .service-description {
                flex: 3;
                font-size: var(--text-font-size);
                color: var(--text-color);
            }

        .card-cta-container {
            margin-top: 3rem;
        }

        .search-wrapper {
            position: relative;
            --search-count: "";
        }

        .search-wrapper::after {
            content: var(--search-count);
            position: absolute;
            right: 1rem;
            top: 1.5rem;
            display: block;
            margin-top: 0.25rem;
            font-size: var(--text-font-size);
            color: rgba(255, 255, 255, 0.5);
        }

        .search-highlight {
            background-color: rgba(255, 255, 0, 0.5);
            padding: 0 0.1em;
            border-radius: 2px;
        }



    </style>

<script>
    /*
      Universal live search + safe highlight + ::after counter
      - auto-applies for services or projects pages
      - safe: only touches text nodes of allowed fields (title, desc, specs)
      - only shows counter when input non-empty (data-count on .search-wrapper)
    */
    
    (function () {
      const configs = [
        // Dienstleistungen
        {
          cardSelector: '.service-card',
          titleSel: '.service-title',
          descSel: '.service-description',
          specsSel: '.service-specs',
          wrapperSel: '.search-wrapper'
        },
        // Referenzen / Projekte
        {
          cardSelector: '.project-card',
          titleSel: '.project-title',
          descSel: '.project-description',
          specsSel: '.project-specs',
          wrapperSel: '.search-wrapper'
        }
      ];
    
      // Utilities
      const escapeRegExp = (s) => s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    
      const normalize = (s) =>
        (s || '').toString().toLowerCase().normalize('NFD').replace(/\p{Diacritic}/gu, '').trim();
    
      const debounce = (fn, wait = 120) => {
        let t;
        return (...args) => {
          clearTimeout(t);
          t = setTimeout(() => fn(...args), wait);
        };
      };
    
      // Walk all configs and initialize where cards exist
      configs.forEach(initForConfig);
    
      function initForConfig(cfg) {
        const sampleCard = document.querySelector(cfg.cardSelector);
        if (!sampleCard) return; // this config not needed on the page
    
        const wrapper = document.querySelector(cfg.wrapperSel);
        const input = wrapper ? wrapper.querySelector('.search-bar') : document.querySelector('.search-bar');
        if (!input) return;
    
        // give wrapper aria-live for screen readers
        if (wrapper) wrapper.setAttribute('aria-live', 'polite');
    
        const cards = Array.from(document.querySelectorAll(cfg.cardSelector));
        // Index and store originals
        const index = cards.map(card => {
          const titleEl = card.querySelector(cfg.titleSel);
          const descEl = card.querySelector(cfg.descSel);
          const specsEl = card.querySelector(cfg.specsSel);
    
          // Save original HTML to restore highlights safely later
          const titleHTML = titleEl ? titleEl.innerHTML : '';
          const descHTML = descEl ? descEl.innerHTML : '';
          const specsHTML = specsEl ? specsEl.innerHTML : '';
    
          // concat text for searching (normalize diacritics for robust search)
          const combinedText = `${titleEl ? titleEl.textContent : ''} ${descEl ? descEl.textContent : ''} ${specsEl ? specsEl.textContent : ''}`;
          return {
            card,
            titleEl,
            descEl,
            specsEl,
            originalDisplay: card.style.display || '',
            titleHTML,
            descHTML,
            specsHTML,
            textSearch: normalize(combinedText)
          };
        });
    
        // Restore originals (remove highlights)
        function restoreOriginals(item) {
          if (item.titleEl) item.titleEl.innerHTML = item.titleHTML;
          if (item.descEl) item.descEl.innerHTML = item.descHTML;
          if (item.specsEl) item.specsEl.innerHTML = item.specsHTML;
        }
    
        // Highlight matches only in text nodes of a given element
        function highlightElement(el, query) {
          if (!el || !query) return;
          // Restore original first to prevent nested marks
          // (we assume caller restored from stored originals earlier, but be safe)
          // We'll not restore here globally; caller ensures original is used first.
    
          const rx = new RegExp(escapeRegExp(query), 'gi');
    
          // Recursive walker for text nodes
          const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, {
            acceptNode(node) {
              // ignore empty/whitespace-only nodes
              if (!node.nodeValue || !node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
              // ignore text nodes that are inside <mark> (avoid re-highlighting)
              if (node.parentNode && node.parentNode.closest && node.parentNode.closest('mark.search-highlight')) return NodeFilter.FILTER_REJECT;
              return NodeFilter.FILTER_ACCEPT;
            }
          });
    
          const textNodes = [];
          while (walker.nextNode()) textNodes.push(walker.currentNode);
    
          textNodes.forEach(textNode => {
            const txt = textNode.nodeValue;
            // test quickly
            if (!rx.test(txt)) {
              rx.lastIndex = 0;
              return;
            }
            rx.lastIndex = 0;
    
            const frag = document.createDocumentFragment();
            let lastIndex = 0;
            let match;
            while ((match = rx.exec(txt)) !== null) {
              const idx = match.index;
              if (idx > lastIndex) {
                frag.appendChild(document.createTextNode(txt.slice(lastIndex, idx)));
              }
              const mark = document.createElement('mark');
              mark.className = 'search-highlight';
              mark.textContent = txt.slice(idx, idx + match[0].length);
              frag.appendChild(mark);
              lastIndex = idx + match[0].length;
            }
            if (lastIndex < txt.length) {
              frag.appendChild(document.createTextNode(txt.slice(lastIndex)));
            }
            textNode.parentNode.replaceChild(frag, textNode);
            rx.lastIndex = 0;
          });
        }
    
        // Run filter & highlight
        function runFilter(rawQuery) {
          const q = rawQuery.trim();
          const qNorm = normalize(q);
    
          if (!q) {
            // empty: show all, remove data-count attribute, restore originals
            index.forEach(item => {
              item.card.style.display = item.originalDisplay;
              restoreOriginals(item);
            });
            if (wrapper) wrapper.removeAttribute('data-count');
            return;
          }
    
          let visible = 0;
          index.forEach(item => {
            if (item.textSearch.indexOf(qNorm) !== -1) {
              // show
              item.card.style.display = item.originalDisplay;
              // restore originals (so highlights are applied cleanly)
              restoreOriginals(item);
              // safe highlight only inside allowed elements
              highlightElement(item.titleEl, q);
              highlightElement(item.descEl, q);
              highlightElement(item.specsEl, q);
              visible++;
            } else {
              // hide and restore originals (so hidden cards don't keep wrapped markup)
              item.card.style.display = 'none';
              restoreOriginals(item);
            }
          });
    
          // set data-count attr only when query present (so ::after only shows then)
          if (wrapper) {
            wrapper.setAttribute('data-count', `${visible} von ${index.length} Ergebnissen`);
          }
        }
    
        const handler = debounce((e) => runFilter(e.target.value), 80);
        input.addEventListener('input', handler);
    
        // run initial if input already filled
        if (input.value && input.value.trim() !== '') runFilter(input.value);
      }
    })();
    </script>
    
    <script type="module" src="js/render/services.js" defer></script>

    
    
    
    

</body>
</html>