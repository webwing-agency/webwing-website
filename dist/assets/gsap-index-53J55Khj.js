(function(){const f="top 85%",b="power3.out";let A=null;const e={headline:{startAt:.06,duration:.8,stagger:.16,y:18,blur:6},subtitle:{duration:.7,startAfter:.38,y:14},cta:{duration:.6,startAfter:.55,y:12,ease:"back.out(1.5)"},bg:{duration:2.2,startAt:0},scribble:{duration:.95,strokeWidthPolish:.2,finalStrokeWidth:4.2,stagger:.05}};function T(){if(!window.gsap)return;const t=window.gsap,o=document.querySelector(".hero-section");if(!o||o.dataset.heroAnimated==="true")return;o.dataset.heroAnimated="true";const n=t.utils.toArray(o.querySelectorAll(".hero-line")),d=o.querySelector("#hero-title"),a=n.length?n:d?[d]:[],c=o.querySelector(".hero-subtitle"),i=o.querySelector(".hero-cta"),u=o.querySelector(".hero-bg"),l=t.utils.toArray(o.querySelectorAll(".scribble-svg path"));if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){a.length&&t.set(a,{y:0,autoAlpha:1,clearProps:"all"}),c&&t.set(c,{y:0,autoAlpha:1,clearProps:"all"}),i&&t.set(i,{y:0,autoAlpha:1,clearProps:"all"}),u&&t.set(u,{scale:1,y:0,autoAlpha:1,clearProps:"all"}),l.length&&l.forEach(r=>{var h;const g=((h=r.getTotalLength)==null?void 0:h.call(r))||0;t.set(r,{strokeDasharray:g,strokeDashoffset:0,opacity:1,clearProps:"all"})});return}a.length&&t.set(a,{y:e.headline.y,autoAlpha:0,filter:`blur(${e.headline.blur}px)`,willChange:"transform,opacity,filter"}),c&&t.set(c,{y:e.subtitle.y,autoAlpha:0,willChange:"transform,opacity"}),i&&t.set(i,{y:e.cta.y,autoAlpha:0,willChange:"transform,opacity"}),u&&t.set(u,{scale:1.04,y:8,autoAlpha:0,willChange:"transform,opacity"}),l.length&&l.forEach(r=>{var h;const g=((h=r.getTotalLength)==null?void 0:h.call(r))||0;t.set(r,{strokeDasharray:g,strokeDashoffset:g,opacity:0,willChange:"stroke-dashoffset,opacity,stroke-width"})});const s=t.timeline({defaults:{ease:"power2.out"}});u&&s.to(u,{scale:1,y:0,autoAlpha:1,duration:e.bg.duration,ease:"power2.out"},e.bg.startAt);function E(){const r=e.headline.startAt;return a.length&&s.fromTo(a,{y:e.headline.y,autoAlpha:0,filter:`blur(${e.headline.blur}px)`},{y:0,autoAlpha:1,filter:"blur(0px)",duration:e.headline.duration,stagger:e.headline.stagger,ease:"power3.out"},r),r}const w=E();if(s.addLabel("headlineStart",w),c&&s.fromTo(c,{y:e.subtitle.y,autoAlpha:0},{y:0,autoAlpha:1,duration:e.subtitle.duration,ease:"power2.out"},`headlineStart+=${e.subtitle.startAfter}`),i&&s.fromTo(i,{y:e.cta.y,autoAlpha:0},{y:0,autoAlpha:1,duration:e.cta.duration,ease:e.cta.ease},`headlineStart+=${e.cta.startAfter}`),l.length){const r=Math.max(1,a.length),g=w+e.headline.duration+e.headline.stagger*(r-1),h=Math.max(w,g-.26);s.to(l,{opacity:1,duration:.12,stagger:e.scribble.stagger},h),s.to(l,{strokeDashoffset:0,duration:e.scribble.duration,ease:"power2.out",stagger:e.scribble.stagger},h),s.to(l,{strokeWidth:e.scribble.finalStrokeWidth,duration:e.scribble.strokeWidthPolish,ease:"power1.out",stagger:e.scribble.stagger},`<+=${Math.max(.08,e.scribble.duration-e.scribble.strokeWidthPolish)}`)}s.to({},{duration:.08}),s.eventCallback("onComplete",()=>{a.forEach(r=>r.style.willChange="auto"),c&&(c.style.willChange="auto"),i&&(i.style.willChange="auto"),u&&(u.style.willChange="auto"),l.length&&l.forEach(r=>r.style.willChange="auto");try{const r=window.gsap;if(i)if(i.classList.add("is-animated-in"),r)r.set(i,{clearProps:"transform,opacity"});else try{i.style.removeProperty("transform"),i.style.removeProperty("opacity")}catch{}l.length&&r&&r.set(l,{clearProps:"strokeDashoffset,strokeDasharray,opacity,strokeWidth"}),a.length&&r&&r.set(a,{clearProps:"filter"})}catch(r){console.error("Hero cleanup error",r)}}),o._heroTimeline=s}function m(){if(!window.gsap||!window.ScrollTrigger)return;const t=window.gsap;t.registerPlugin(ScrollTrigger),t.utils.toArray(".section-title").forEach(o=>{t.set(o,{y:10,autoAlpha:0}),ScrollTrigger.create({trigger:o,start:f,onEnter:n=>{t.to(o,{y:0,autoAlpha:1,duration:.6,ease:b}),n.kill()}})}),t.utils.toArray(".grid").forEach(o=>{const n=Array.from(o.querySelectorAll(".grid-card")||[]);n.length&&(t.set(n,{y:24,autoAlpha:0,willChange:"transform, opacity"}),ScrollTrigger.batch(n,{interval:.12,batchMax:10,start:f,once:!0,onEnter:d=>{t.to(d,{y:0,autoAlpha:1,duration:.6,ease:b,stagger:{each:.08,from:"start"},overwrite:!0,onComplete:function(){try{const a=window.gsap;a&&a.set(d,{clearProps:"transform,opacity"})}catch{}}})}}))}),t.utils.toArray(".book-call-card").forEach(o=>{t.set(o,{y:20,autoAlpha:0,willChange:"transform, opacity"}),ScrollTrigger.create({trigger:o,start:f,onEnter:n=>{t.to(o,{y:0,autoAlpha:1,duration:.55,ease:b}),n.kill()}})})}let p=!1;function S(){const t=document.querySelector(".hero-section");if(!t)return!0;const o=t.querySelectorAll(".hero-line").length>0,n=t.querySelector("#hero-title"),d=n&&n.textContent&&n.textContent.trim().length>0;return!(!(o||d)||t.querySelectorAll(".underline-scribble").length>0&&t.querySelectorAll(".scribble-svg").length===0&&(A||(A=Date.now()+1500),Date.now()<A))}function y(){if(!(p||!window.gsap||!(document.querySelector(".section-title")||document.querySelector(".grid")||document.querySelector(".book-call-card")||document.querySelector(".hero-section")))&&S()){p=!0;try{T(),m()}catch(o){console.error("Failed to initialize GSAP animations",o)}}}window.addEventListener("content:ready",()=>{setTimeout(y,8)},{once:!0}),window.addEventListener("hero:rendered",()=>{setTimeout(y,8)});const C=setInterval(()=>{if(p){clearInterval(C);return}y()},60);window.addEventListener("load",()=>{setTimeout(y,10)},{once:!0}),setTimeout(()=>{y()},1e3),window.IndexAnimations={reinit(){p=!1,A=null;try{window.ScrollTrigger&&typeof window.ScrollTrigger.getAll=="function"&&window.ScrollTrigger.getAll().forEach(t=>t.kill())}catch{}y()}}})();function v(){var f;(f=window.IndexAnimations)!=null&&f.reinit&&window.IndexAnimations.reinit()}export{v as reinitIndexAnimations};
