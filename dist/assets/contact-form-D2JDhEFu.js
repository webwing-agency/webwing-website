function C(S=document){const e=S.querySelector(".contact-form");e&&e.dataset.bound!=="true"&&(e.dataset.bound="true",e.addEventListener("submit",async b=>{var i,l,u,d,f,m,h,y;b.preventDefault();const o=((l=(i=e.querySelector("#contactName"))==null?void 0:i.value)==null?void 0:l.trim())||"",a=((d=(u=e.querySelector("#contactEmail"))==null?void 0:u.value)==null?void 0:d.trim())||"",v=((m=(f=e.querySelector("#contactPhone"))==null?void 0:f.value)==null?void 0:m.trim())||"",s=((y=(h=e.querySelector("#messageText"))==null?void 0:h.value)==null?void 0:y.trim())||"";if(!o||!a||!s){alert("Bitte Name, E-Mail und Nachricht ausfüllen.");return}const c=e.querySelector('input[name="cf-turnstile-response"]'),g=c?c.value:null,q={name:o,email:a,phone:v,message:s,token:g},t=e.querySelector('button[type="submit"]');t&&(t.disabled=!0,t.dataset.orig=t.textContent,t.textContent="Senden…");try{const n=window.API_BASE||"http://localhost:3000",p=await fetch(`${n}/api/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),r=await p.json();if(p.ok){if(alert("Danke — Ihre Nachricht wurde gesendet."),e.reset(),typeof turnstile<"u"&&typeof turnstile.reset=="function")try{turnstile.reset()}catch{}}else alert("Fehler: "+((r==null?void 0:r.message)||"Serverfehler"))}catch(n){console.error("Contact submit error",n),alert("Netzwerkfehler. Bitte später versuchen.")}finally{t&&(t.disabled=!1,t.textContent=t.dataset.orig||"Senden")}}))}export{C as initContactForm};
