async function h(){const t=await fetch("/data/index.json",{cache:"no-store"});if(!t.ok)throw new Error("Failed to fetch index.json: "+t.status);return t.json()}function c(t){return t==null?"":typeof t=="string"?t:String(t)}function E(t){const n=c(t);if(!n)return"";const r=n.split(/<br\s*\/?>/i);return r.length===1?n:r.map(e=>e.trim()).filter(Boolean).map(e=>`<span class="hero-title-line">${e}</span>`).join("")}function x(t){if(t&&"meta_title"in t){const n=c(t.meta_title);n&&(document.getElementById("meta-title").textContent=n)}if(t&&"meta_description"in t){const n=c(t.meta_description);n&&document.getElementById("meta-description").setAttribute("content",n)}}function y(t,n=document){const r=n.querySelector("#hero-title"),e=n.querySelector("#hero-subtitle"),i=n.querySelector("#hero-cta"),a=n.querySelector("#hero-image");if(!t){console.debug("[render] hero object missing"),r&&(r.textContent=""),e&&(e.textContent=""),i&&(i.textContent="Kontakt",i.href="#"),a&&(a.src="");return}const f=c(t.title_html);if(r&&(r.innerHTML=E(f)),e&&(e.textContent=c(t.subtitle||"")),i&&(i.textContent=c(t.cta_text||"Kontakt"),i.href=c(t.cta_link||"#")),a){const u=c(t.hero_image||"");u?a.src=u:a.removeAttribute("src")}}function C(t,n=document){const r=n.querySelector("#expertise-grid");!r||!Array.isArray(t)||(r.innerHTML="",t.forEach(e=>{const i=c((e==null?void 0:e.icon)||""),a=c((e==null?void 0:e.title)||""),f=c((e==null?void 0:e.text)||""),u=c((e==null?void 0:e.key)||"design"),o=document.createElement("div");o.className="grid-card";const s=document.createElement("div");if(s.className="icon-container",s.dataset.icon=u,i){const p=document.createElement("img");p.src=i,p.className="icon",s.appendChild(p)}const l=document.createElement("h3");l.className="card-title",l.textContent=a;const d=document.createElement("p");d.className="card-text",d.textContent=f,o.append(s,l,d),r.appendChild(o)}))}function w(t,n=document){const r=n.querySelector("#projects-grid");r&&(r.innerHTML="",Array.isArray(t)&&t.forEach(e=>{const i=c((e==null?void 0:e.image)||""),a=c((e==null?void 0:e.title)||""),f=c((e==null?void 0:e.text)||""),u=Array.isArray(e==null?void 0:e.tags)?e.tags:[],o=document.createElement("div");o.className="grid-card";const s=document.createElement("img");s.className="card-img project-img",i?s.src=i:s.removeAttribute("src"),s.alt=a;const l=document.createElement("h3");l.className="card-title",l.textContent=a;const d=document.createElement("p");d.className="card-text",d.textContent=f;const p=document.createElement("div");p.className="tag-container",u.forEach(g=>{const m=document.createElement("span");m.className="tag",m.textContent=c(g),p.appendChild(m)}),o.appendChild(s),o.appendChild(l),o.appendChild(d),o.appendChild(p),r.appendChild(o)}))}function _(t,n=document){const r=n.querySelector("#reviews-grid");r&&(r.innerHTML="",Array.isArray(t)&&t.forEach(e=>{const i=c((e==null?void 0:e.client_img)||""),a=c((e==null?void 0:e.client_name)||""),f=c((e==null?void 0:e.corporation_name)||""),u=c((e==null?void 0:e.text)||""),o=document.createElement("div");o.className="grid-card";const s=document.createElement("img");s.className="client-img",i&&(s.src=i),s.alt=a;const l=document.createElement("h3");l.className="card-title client-name",l.textContent=a;const d=document.createElement("span");d.className="corporation-name",d.textContent=f;const p=document.createElement("p");p.className="card-text testimonial-text",p.textContent=u,o.appendChild(s),o.appendChild(l),o.appendChild(d),o.appendChild(p),r.appendChild(o)}))}function S(t,n=document){if(!t){console.debug("[render] contact missing");return}const r=n.querySelector("#contact-email");r&&(r.href=`mailto:${c(t.email||"")}`,r.textContent=c(t.email||""));const e=n.querySelector("#contact-phone");e&&(e.href=`tel:${c(t.phone||"")}`,e.textContent=c(t.phone||"")),t.booking_api_base&&(window.__BOOKING_API_BASE__=c(t.booking_api_base))}async function A(t=document){try{const n=await h();x(n||{}),y((n==null?void 0:n.hero)||{},t),C((n==null?void 0:n.expertise)||[],t),w((n==null?void 0:n.projects)||[],t),_((n==null?void 0:n.reviews)||[],t),S((n==null?void 0:n.contact)||{},t);try{window.dispatchEvent(new Event("hero:rendered")),window.dispatchEvent(new Event("content:ready")),document.dispatchEvent(new Event("content:rendered"))}catch{}requestAnimationFrame(()=>{if(typeof initScrollAnimations=="function")try{initScrollAnimations()}catch(r){console.warn("[initScrollAnimations] failed",r)}else console.warn("[initScrollAnimations] not defined â€” skipping");window.ScrollTrigger&&typeof window.ScrollTrigger.refresh=="function"&&window.ScrollTrigger.refresh()})}catch(n){console.error("Failed to load content JSON",n)}}export{A as initHomePage};
